/* Lógico_1: */

CREATE TABLE Personagem (
    ID_Personagem INT PRIMARY KEY NOT NULL,
    Nome_Personagem VARCHAR(252) NOT NULL,
    Etnia_Personagem VARCHAR(252) NOT NULL,
    Nome_Vitima VARCHAR(252),
    Nome_Controlador VARCHAR(252),
    Personagem_TIPO INT NOT NULL,
    FK_ID_Tratamento INT,
    FK_ID_Sociocultural INT
);

CREATE TABLE Tratamento (
    ID_Tratamento INT PRIMARY KEY NOT NULL,
    Nome_Tratamento VARCHAR(252) NOT NULL,
    Descricao_Tratamento VARCHAR(252) NOT NULL,
    FK_ID_Membro_Familia VARCHAR(252) 
);

CREATE TABLE Familia (
    ID_Familia INT PRIMARY KEY NOT NULL,
    Nome_Familia VARCHAR(252) NOT NULL,
    Qtde_Membros INT NOT NULL
);

CREATE TABLE Contexto_Sociocultural (
    ID_Sociocultural INT PRIMARY KEY NOT NULL,
    Nome_Contexto VARCHAR(252) NOT NULL,
    Classe_Sociocultural VARCHAR(252) NOT NULL,
    Descricao_Sociocultural VARCHAR(252) NOT NULL
);

CREATE TABLE Membro_Familia (
    ID_Membro_Familia VARCHAR(252) PRIMARY KEY NOT NULL,
    Funcao_Membro VARCHAR(252) NOT NULL,
    FK_ID_Familia INT,
    FK_ID_Personagem INT
);
 
ALTER TABLE Personagem ADD CONSTRAINT FK_Personagem_2
    FOREIGN KEY (FK_ID_Tratamento)
    REFERENCES Tratamento (ID_Tratamento)
    ON DELETE RESTRICT;
 
ALTER TABLE Personagem ADD CONSTRAINT FK_Personagem_3
    FOREIGN KEY (FK_ID_Sociocultural)
    REFERENCES Contexto_Sociocultural (ID_Sociocultural)
    ON DELETE RESTRICT;
 
ALTER TABLE Tratamento ADD CONSTRAINT FK_Tratamento_2
    FOREIGN KEY (FK_ID_Membro_Familia)
    REFERENCES Membro_Familia (ID_Membro_Familia)
    ON DELETE RESTRICT;
 
ALTER TABLE Membro_Familia ADD CONSTRAINT FK_Membro_Familia_2
    FOREIGN KEY (FK_ID_Familia)
    REFERENCES Familia (ID_Familia);
 
ALTER TABLE Membro_Familia ADD CONSTRAINT FK_Membro_Familia_3
    FOREIGN KEY (FK_ID_Personagem)
    REFERENCES Personagem (ID_Personagem);